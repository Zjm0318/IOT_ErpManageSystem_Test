
@{
    ViewData["Title"] = "Index";
}
<style>
    .open {
        background: #f88408;
        width: 60px;
        height: 30px;
        text-align: center;
        line-height: 30px ;
        float:left;
        margin-right: 30px
    }
</style>
<div style="width:200px;margin-left:75px;float:left;margin-top:30px;margin-bottom:30px">
    @*<a class="layui-btn layui-btn-danger batchDel" onclick="Emp('/InStorage/Emp',500,500)">指派</a>*@
    <div class="alert open" onclick="mizhu.open(200,300, '新增区域', '/StorageStruct/addarea');">新增区域</div>
    <div class="alert open" onclick="mizhu.open(200, 300, '新增货架', '/StorageStruct/addshelf');">新增货架</div>
</div>
<table class="layui-table" style="width:1340px;text-align:center;margin-left:70px">
    <tr>
        <td>仓库编号</td>
        <td>仓库名称</td>
        <td>仓库位置</td>
        <td>仓管员</td>
        <td>区域数量</td>
        <td>货架数量</td>
        <td>库位数量</td>
    </tr>
    <tbody id="tb">
    </tbody>
</table>
<div style="margin-top:30px">
    <div class="page" style="width:300px;margin-left:500px;float:right">
        <a href="#" style="margin-right:25px" onclick="First()">首页</a>
        <a href="#" style="margin-right:25px" onclick="Pre()">上一页</a>
        <a href="#" style="margin-right:25px" onclick="Next()">下一页</a>
        <a href="#" style="margin-right:25px" onclick="Last()">尾页</a>
    </div>
</div>
<script src="~/lib/jquery/dist/jquery.js"></script>
<script>
    var pageIndex = 1;
    var pageSize = 3;
    var pageCount = 0;
    $(function () {
        Show();
    })

    function Show() {
        var time = "13526552356";
        var reg = new RegExp("");
        $.ajax({
            url: "http://localhost:52645/api/StorageStructure/GetStorageList?pageIndex=" + pageIndex + "&pageSize=" + pageSize,
            type: "get",
        }).done(function (data) {
            $("#tb").empty();
            $.each(data.list, function (index, item) {
                var tr = "<tr>" +
                    "<td>" + item.rid + "</td>" +
                    "<td>" + item.storageName + "</td>" +
                    "<td>" + item.storageLocation + "</td>" +
                    "<td>" + item.storageMan + "</td>" +
                    "<td>" + item.areaNum + "</td>" +
                    "<td>" + item.shelfNum + "</td>" +
                    "<td>" + item.seatNum + "</td>" +
                    "</tr>";
                $("#tb").append(tr);
            })
            pageCount = data.rowCount;
            pageCount = Math.ceil(pageCount / pageSize);
        });
    }
    //首页
    function First() {
        pageIndex = 1;
        Show();
    }
    //上一页
    function Pre() {
        if (pageIndex == 1) {
            alert("已经是第一页了");
            return;
        }
        pageIndex = pageIndex - 1;
        Show();
    }
    //下一页
    function Next() {
        if (pageIndex == pageCount) {
            alert("已经是最后一页了");
            return;
        }
        pageIndex = pageIndex + 1;
        Show();
    }
    //尾页
    function Last() {
        pageIndex = pageCount;
        Show();
    }
</script>

